(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{392:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"class-this-바인딩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-this-바인딩"}},[t._v("#")]),t._v(" class this 바인딩")]),t._v(" "),a("h3",{attrs:{id:"에러"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#에러"}},[t._v("#")]),t._v(" 에러")]),t._v(" "),a("hr"),t._v(" "),a("ol",[a("li",[t._v("router에서 컨트롤러 함수 호출 설정해둠→ 컨트롤러 호출 → 컨트롤러가 베이스컨트롤러에 있는 함수를 사용해서 베이스컨트롤러의 함수 호출")]),t._v(" "),a("li",[t._v("베이스 컨트롤러가 "),a("code",[t._v("responseController")]),t._v(" 를 멤버변수로 가지고있음")])]),t._v(" "),a("p",[t._v("이런 상황에서 자꾸 다음 에러발생....")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("TypeError"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cannot read property "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'responseController'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n    at BaseController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\src\\controllers\\BaseController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" handle_request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("112")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" handle_request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("281")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process_params")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("335")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("275")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("174")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("router")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\typescript\\BorryJJong\\todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list\\node_modules\\express\\lib\\router\\index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" responseController"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ResponseController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("생략"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseController "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("생략"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("list")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clientError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("처음엔 다른 것들이 문제인 줄 알고 (다른 언어에서의 사용을 생각하고😭 this바인딩 문제일거라곤 진짜 생각도 못함) 이상한거 건들다가..")]),t._v(" "),a("p",[t._v("디버깅 해보니 "),a("code",[t._v("this")]),t._v(" 자체가 "),a("code",[t._v("undefined")]),t._v(" 였다.............")]),t._v(" "),a("p",[t._v("그래서 생성자쪽에서 브레이크포인트찍고 this 입력해봤을땐 또 제대로 뜨는 걸 보고,\n바인딩 문제구나 알아차렸고.. 예~~~~~~~~전에 ts 공부 처음할 때 "),a("em",[t._v("ts에서 class this 바인딩은 주의해야합니다 어쩌구 저쩌구")]),t._v(" 글을 봤던 게 생각났다..")]),t._v(" "),a("p",[t._v("역시 사람은 직접 겪어봐야 머리에 남는구나 싶음")]),t._v(" "),a("h3",{attrs:{id:"왜-이런-문제가-생기는-걸까"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#왜-이런-문제가-생기는-걸까"}},[t._v("#")]),t._v(" 왜 이런 문제가 생기는 걸까?")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("ts는 js의 슈퍼셋")]),t._v("이기에 아무리 class를 가다듬었다고 할지라도 "),a("strong",[t._v("js의 본질적인 문제")]),t._v("에선 벗어날 수 없다. 생각해보면 늘 js에서 "),a("code",[t._v("var _this = this;")]),t._v(" 이런식으로 바인딩 해서 썼었다..")]),t._v(" "),a("h3",{attrs:{id:"해결방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결방법"}},[t._v("#")]),t._v(" 해결방법")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("가장 간단한 수정방법은 함수형태로 된 클래스의 메소드를 "),a("code",[t._v("화살표 함수")]),t._v(" 로 변경하는 것이다.")]),t._v(" "),a("p",[t._v("왜냐하면, 화살표함수는 "),a("code",[t._v("this")]),t._v("를 별도로 바인딩 하지 않기 때문이다.(The this in arrow functions is lexically scoped)")]),t._v(" "),a("h3",{attrs:{id:"참고링크"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참고링크"}},[t._v("#")]),t._v(" 참고링크")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/16157839/typescript-this-inside-a-class-method",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://stackoverflow.com/questions/16157839/typescript-this-inside-a-class-method"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"http://norux.me/61",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://norux.me/61"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);